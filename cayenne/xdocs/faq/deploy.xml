<document>
<title>Frequently Asked Questions: Deploy Cayenne Applications</title>

<body>
    <section name="FAQ 5. Deploy Cayenne Applications">
    	<subsection name="Q 5.1 
    					When my application is idle for a long period of time,
    					I get 'connection was lost' or similar errors?" 
    	anchor="reconnect">
    	
    	<p>There can be a few reasons for this error: some database servers will automatically drop idle client connections, 
    	database server may have been restarted, etc. Pooled connections may become invalid over a period of time due to one of these reasons,
    	resulting in exceptions thrown when such connections are used.</p>
    	
    	<p>Cayenne's default connection pool implements a 
    	few checks for invalid connections, and reconnects if possible. Unfortunately due to driver
    	differences, this does not work reliably across database engines (One database were reconnects work rather well
    	is Oracle). If you are still having this problem, here is a few suggested solutions:
    	
    	<ul>
    		<li>If you are using MySQL, MYSQL JDBC driver offers "auto-reconnect" feature. Use a URL parameter "autoReconnect" set to "true"
    		to enable reconnection. E.g.: <i>jdbc:mysql://localhost/test?autoReconnect=true</i>. Unfortunately other
    		databases do not have such feature.</li>
    		
    		<li>Configure your database server to prevent idle connections from being automatically closed. Consult your database
    		documentation on the details.</li>
    		
    		<li>Use a third party connection pool implementation, that performs explicit connection validation, e.g. by running 
    		a test query every time before checking it out.
    		It can be configured in many different ways, e.g. as a DataSource accessible via JNDI.
    		</li>
    	</ul>
    	</p>
    	</subsection>
    </section>
</body>
</document>
