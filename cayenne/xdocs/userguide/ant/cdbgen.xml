<document>
	<title>User Guide - Ant Tasks</title>
	<toc name="toc-user-guide" chapter="13. Ant Tasks"/>
	<body>
		<section name="13. Ant Tasks">
			<subsection name="13.2 cdbgen: DB Schema Generator">
				<h3>Description</h3>
				<p><code>cdbgen</code> is an Ant task that uses Cayenne DataMap 
					to drop and/or generate schema objects of a specified database.</p>
				<h3>Parameters</h3>
				<table border="1" cellpadding="2" cellspacing="0">
					<tr>
						<th valign="top">
							<b>Attribute</b>
						</th>
						<th valign="top">
							<b>Description</b>
						</th>
						<th align="center" valign="top">
							<b>Required</b>
						</th>
					</tr>
					<tr>
						<td valign="top">map</td>
						<td valign="top">DataMap XML file to use as a schema descriptor.</td>
						<td valign="top" align="center">Yes</td>
					</tr>
					<tr>
						<td valign="top">adapter</td>
						<td valign="top">Java class implementing 
							org.objectstyle.cayenne.dba.DbAdapter. While this 
							attribute is optional (a generic JdbcAdapter is 
							used if not set), it is highly recommended to 
							specify correct target adapter.</td>
						<td valign="top" align="center">No (but strongly recommended)</td>
					</tr>
					<tr>
						<td valign="top">driver</td>
						<td valign="top">A class of JDBC driver to use for the 
							target database.</td>
						<td valign="top" align="center">Yes</td>
					</tr>
					<tr>
						<td valign="top">url</td>
						<td valign="top">JDBC connection URL of a target database.</td>
						<td valign="top" align="center">Yes</td>
					</tr>
					<tr>
						<td valign="top">username</td>
						<td valign="top">Database user name.</td>
						<td valign="top" align="center">No</td>
					</tr>
					<tr>
						<td valign="top">password</td>
						<td valign="top">Database user password.</td>
						<td valign="top" align="center">No</td>
					</tr>
					<tr>
						<td valign="top">droptables</td>
						<td valign="top">Defines whether cdbgen should drop the 
							tables before attempting to create new ones. Default is "No".</td>
						<td valign="top" align="center">No</td>
					</tr>
					<tr>
						<td valign="top">droppk</td>
						<td valign="top">Defines whether cdbgen should drop 
							Cayenne primary key support objects. Default is 
							"No".</td>
						<td valign="top" align="center">No</td>
					</tr>
					<tr>
						<td valign="top">createtables</td>
						<td valign="top">Defines whether cdbgen should create 
							new tables. Default is "Yes".</td>
						<td valign="top" align="center">No</td>
					</tr>
					<tr>
						<td valign="top">createpk</td>
						<td valign="top">Defines whether cdbgen should create 
							Cayenne-specific auto PK objects. Default is "Yes".</td>
						<td valign="top" align="center">No</td>
					</tr>
					<tr>
						<td valign="top">createfk</td>
						<td valign="top">Defines whether cdbgen should create 
							foreign key copnstraints. Default is "Yes".</td>
						<td valign="top" align="center">No</td>
					</tr>
				</table>
				<p> </p>
				<panel name="Driver Classpath Note:"> Support for "classpath" 
					or "classpathref" attributes is pending. To work around 
					this limitation, JDBC driver (and custom DbAdapter) classpath can be 
					appended to the classpath used to load the task via "taskdef". </panel>
				<h3>Examples:</h3>
				<p>Here is an example of using <code>cdbgen</code> to create DB 
					schema objects on a local HSQLDB.</p>
				<source>&amp;lt;taskdef name="cdbgen" classname="org.objectstyle.cayenne.tools.DbGeneratorTask"&amp;gt;
    &amp;lt;classpath refid="classpath"/&amp;gt;
&amp;lt;/taskdef&amp;gt;

&amp;lt;cdbgen map="${context.dir}/WEB-INF/DefaultMap.map.xml" 
    adapter="org.objectstyle.cayenne.dba.hsqldb.HSQLDBAdapter"
    driver="org.hsqldb.jdbcDriver" 
    url="jdbc:hsqldb:hsql://localhost/bookmarker" 
    username="sa"/&amp;gt;</source>
			</subsection>
		</section>
	</body>
</document>