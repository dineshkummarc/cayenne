<document>
<title>User Guide - Writing Cayenne Applications</title>

    <properties>
        <author>Andrei Adamchik</author>
    </properties>
<navigator>
	<up>/userguide/index.html</up>
	<prev>/userguide/modeler/schemamap.html</prev>
	<next>/userguide/webobjects.html</next>
</navigator>
<body>
    <section name="6. CayenneModeler GUI Tool">
        <subsection name="6.6 Generating Primary Key Support in the Database" anchor="pk">
        	<p>One of Cayenne core features is automatic generation of the database primary
        	keys for the new objects. This requires a set of special database objects to
        	be present in the database. (Those are adapter specific and can be special lookup tables,
        	stored procedures, sequences, etc.). If the database schema was generated by 
        	CayenneModeler, chances are that all needed database objects were already created.
        	Otherwise, if there was an existing schema, these objects must be generated by
        	the application programmer or DBA using CayenneModeler, or SQL scripts created by
        	CayenneModeler.</p>
        	
        	<p>Provided that there is an existing Cayenne project with a DataMap, the following
        	steps are needed to configure primary key support:</p>
        	
        	<ul>
        	   <li>Open project in CayenneModeler.</li>
        	   <li>Select a DataMap (preferebly under an already configured DataNode),
        	   and choose <strong>"Tools -> Generate Database Schema"</strong> from the menu:</li>
        	</ul>
        	
        	 <img src="/images/dbgen-menu.gif" width="391" height="286" border="0" align="middle"
			alt="Cayenne Login Panel"/>
        	
        	<ul>
        	   <li>When a login panel pops up, enter database information. If the DataMap
        	   was selected under a DataNode, then all the login information from this DataNode
        	   should already be entered.</li>
        	   <li>When a schema generation panel pops up, leave only <strong>"Drop Primary Key 
        	   Support"</strong>
        	   and <strong>"Create Primary Key Support"</strong> choices checked:</li>
        	</ul>
        	<img src="/images/dbgen-mysql.gif" width="581" height="500" border="0" align="middle"
			alt="Cayenne Login Panel"/>
        	
        	<ul>
        	   <li>Now, if you have enough database privileges to execute listed
        	   queries, click on <strong>"Generate"</strong> button, otherwise click
        	   on <strong>"Save SQL"</strong> button to store the queries, and let
        	   the authorized DBA to run these statements.</li>
        	</ul>
        </subsection>
    </section>
</body>
</document>





