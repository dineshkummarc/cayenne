<?xml version="1.0"?>

<!-- ================================================= -->
<!--           Cayenne examples buildfile.             -->
<!--             (called from build.xml)               -->
<!-- ================================================= -->
<project name="cayenne-examples" default="dist" basedir=".">

	<property name="rn.file" value="RELEASE-NOTES-${project.version}.examples.txt"/>
 
 	<!-- ========================================== -->
    <!-- Build cayenne-examples.tar.gz              -->
    <!-- ========================================== -->
    <target name="dist" depends="no-release-notes,prepare">
    	<property name="examples.name" value="${project.examples.name}-src-${project.version}"/>
		<tar tarfile="${dist.base}/${examples.name}.tar.gz" compression="gzip">
			<tarfileset prefix="${examples.name}" dir="examples"/>
			<tarfileset prefix="${examples.name}" dir="doc/release-notes">
				<include name="${rn.file}"/>
			</tarfileset>
		</tar>
    </target>
		
    <!-- ========================================== -->
    <!-- Creates distro directory.                  -->
    <!-- ========================================== -->
    <target name="prepare">
        <mkdir dir="${dist}"/>
    </target>    


    <target name="no-release-notes">
    	<available file="doc/release-notes/${rn.file}" property="examples.release.notes"/>
    	<fail unless="examples.release.notes">No release notes file found: doc/release-notes/${rn.file}</fail>
    </target>
</project>


