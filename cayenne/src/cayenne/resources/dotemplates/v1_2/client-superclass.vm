##Terminology:
##	Base class - super superclass of entity, ie, org.objectstyle.cayenne.CayenneDataObject or MyBaseClass
##  Super class - superclass of entity, ie,  org.objectstyle.cayenne.art.auto._Artist
##	Sub class - class of entity, ie, org.objectstyle.cayenne.art.Artist
##
##  Classes available in template
##    objEntity - the ObjEntity class: See org.objectstyle.cayenne.map.ObjectEntity
##    stringUtils - class for string "helper" functions: See org.objectstyle.cayenne.gen.StringUtils
##    entityUtils - class for entity "helper" functions: See org.objectstyle.cayenne.gen.EntityUtils
##    importUtils - class for import statement management: See org.objectstyle.cayenne.gen.ImportUtils
##
##
${importUtils.setPackage($entityUtils.superPackageName)}##
${importUtils.addType("${entityUtils.basePackageName}.${entityUtils.baseClassName}")}##
#foreach( $attr in ${objEntity.DeclaredAttributes} )
$importUtils.addType(${attr.Type})##
#end
#foreach( $rel in ${objEntity.DeclaredRelationships} )
$importUtils.addType(${rel.TargetEntity.ClientClassName})##
#end
#if( ${entityUtils.hasToManyRelationships()} )
${importUtils.addType('java.util.List')}##
#end
${importUtils.generate()}

/** Class ${entityUtils.superClassName} was generated by Cayenne.
  * It is probably a good idea to avoid changing this class manually,
  * since it may be overwritten next time code is regenerated. 
  * If you need to make any customizations, put them in a subclass. 
  */
public class ${entityUtils.superClassName} extends ${entityUtils.baseClassName} {

## Create ivars names
#foreach( $attr in ${objEntity.DeclaredAttributes} )
    public static final String ${stringUtils.capitalizedAsConstant($attr.Name)}_PROPERTY = "${attr.Name}";
#end
#foreach( $rel in ${objEntity.DeclaredRelationships} )
    public static final String ${stringUtils.capitalizedAsConstant($rel.Name)}_PROPERTY = "${rel.Name}";
#end

## Create ivars
#foreach( $attr in ${objEntity.DeclaredAttributes} )
    protected $importUtils.formatJavaType(${attr.Type}) ${attr.Name};
#end
#foreach( $rel in ${objEntity.DeclaredRelationships} )
#if( $rel.ToMany )
    protected List ${rel.Name};
#else
    protected $importUtils.formatJavaType(${rel.TargetEntity.ClientClassName}) ${rel.Name};
#end
#end

## Create attribute set/get methods
#foreach( $attr in ${objEntity.DeclaredAttributes} )
#if ("true" != "${objEntity.isReadOnly()}")
    public void set${stringUtils.capitalized($attr.Name)}($importUtils.formatJavaType(${attr.Type}) $stringUtils.formatVariableName(${attr.Name})) {
        willWrite("${attr.Name}", get${stringUtils.capitalized($attr.Name)}(), $stringUtils.formatVariableName(${attr.Name}));
        this.$stringUtils.formatVariableName(${attr.Name}) = $stringUtils.formatVariableName(${attr.Name});
    }
#end
    public $importUtils.formatJavaType(${attr.Type}) get${stringUtils.capitalized($attr.Name)}() {
        willRead("${attr.Name}");
        return ${attr.Name};
    }
    
    
#end
##
##
## Create list add/remove/get methods
#foreach( $rel in ${objEntity.DeclaredRelationships} )
#if( $rel.ToMany )
#if ( ! $rel.ReadOnly )
    public void addTo${stringUtils.capitalized($rel.Name)}($importUtils.formatJavaType(${rel.TargetEntity.ClientClassName}) obj) {
        // TODO:
    }
    public void removeFrom${stringUtils.capitalized($rel.Name)}($importUtils.formatJavaType(${rel.TargetEntity.ClientClassName}) obj) {
        // TODO:
    }
#end
    public List get${stringUtils.capitalized($rel.Name)}() {
        willRead("${rel.Name}");
        return ${rel.Name};
    }
#else
#if ( !${objEntity.isReadOnly()} && !$rel.ReadOnly )
    public void set${stringUtils.capitalized($rel.Name)}($importUtils.formatJavaType(${rel.TargetEntity.ClientClassName}) $stringUtils.formatVariableName(${rel.name})) {
        willWrite("${rel.Name}", get${stringUtils.capitalized($rel.Name)}(), $stringUtils.formatVariableName(${rel.Name}));
        this.$stringUtils.formatVariableName(${rel.Name}) = $stringUtils.formatVariableName(${rel.Name});
    }
#end

    public $importUtils.formatJavaType(${rel.TargetEntity.ClientClassName}) get${stringUtils.capitalized($rel.Name)}() {
        willRead("${rel.Name}");
        return ${rel.Name};
    } 
#end
    
#end
}
